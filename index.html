<html>
<head>
    <title>Smile Survey</title>
  <script
  src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
  integrity="sha256-pasqAKBDmFT4eHoN2ndd6lN370kFiGUFyTiUHWhU7k8="
  crossorigin="anonymous"></script>
</head>
<style>
  .credit {
    color: gray;
    font-size: 70%;
    clear: both;
  }

  .emoji {
    cursor: pointer;
  }

  .lock {
    cursor: pointer;
  }

  .result {
    clear: both;
  }
</style>
<body>

<div>
  <img src="happy.png" style="float: left" class="emoji" onclick="receiveClick('happy');">
  <img src="sad.png" style="float: right" class="emoji" onclick="receiveClick('sad');">
</div>

<div class="result"> 
  <br><br><br><br><br><br><br>
  <span class="lock" onclick="viewResults();">View results</a>
  <div id="results"></div>
</div>
<div class="credit">
<br><br><br>
  Image credit:<a href="https://twemoji.twitter.com/">Twemoji</a>
</div>
</body>
<script type="text/javascript">

  let numHappy = 0;
  let numSad = 0;
  let enabled = true;

  function receiveClick(emoji) {
    if (!enabled) {
      return;
    }

    if (emoji === "happy") {
      numHappy++;
    } else {
      numSad++;
    }

    enabled = false;
    $(".emoji").css("opacity", "0.5");
    setTimeout(function(){
      enabled = true;
      $(".emoji").css("opacity", "1");
    }, 1000);
  }

  function viewResults() {
    let password = prompt();
    if (password === "1234" && (numHappy > 0 || numSad > 0)) {

      let happyRate = (numHappy / (numHappy + numSad) * 100).toFixed(0);
      let result = numHappy + " happy, " + numSad + " sad. Happy percentage: " + happyRate + "%";
      $("#results").text(result);
    }


  }
</script>
</html>